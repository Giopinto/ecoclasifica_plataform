<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoClasifica - Plataforma Educativa de Clasificación de Residuos</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
        }

        .logo {
            font-size: 3em;
            color: #2d5a27;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .subtitle {
            color: #5a6c57;
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .regulation-info {
            background: linear-gradient(45deg, #4CAF50, #81C784);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            font-weight: bold;
        }

        .modules-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .module-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
            cursor: pointer;
            border: 3px solid transparent;
            backdrop-filter: blur(10px);
        }

        .module-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.25);
            border-color: #4CAF50;
        }

        .module-card.active {
            border-color: #2196F3;
            background: linear-gradient(135deg, #E3F2FD, #BBDEFB);
        }

        .module-icon {
            font-size: 3em;
            margin-bottom: 15px;
            text-align: center;
        }

        .module-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #2d5a27;
            margin-bottom: 10px;
        }

        .module-description {
            color: #666;
            line-height: 1.6;
        }

        .content-area {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            margin-top: 20px;
            backdrop-filter: blur(10px);
            min-height: 400px;
        }

        .hidden {
            display: none !important;
        }

        /* Simulador de Clasificación */
        .simulator {
            text-align: center;
        }

        .waste-item {
            display: inline-block;
            margin: 10px;
            padding: 15px 25px;
            background: linear-gradient(45deg, #FF6B6B, #FF8E8E);
            color: white;
            border-radius: 25px;
            cursor: grab;
            user-select: none;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .waste-item:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .waste-item:active {
            cursor: grabbing;
            transform: scale(0.95);
        }

        .bins-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .bin {
            min-height: 150px;
            border: 3px dashed #ccc;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.5);
        }

        .bin:hover, .bin.drag-over {
            border-color: #4CAF50;
            background: rgba(76, 175, 80, 0.1);
            transform: scale(1.02);
        }

        .bin.correct-drop {
            border-color: #4CAF50;
            background: linear-gradient(45deg, rgba(76, 175, 80, 0.2), rgba(129, 199, 132, 0.2));
            animation: correctDrop 0.6s ease;
        }

        .bin.incorrect-drop {
            border-color: #F44336;
            background: linear-gradient(45deg, rgba(244, 67, 54, 0.2), rgba(239, 154, 154, 0.2));
            animation: incorrectDrop 0.6s ease;
        }

        @keyframes correctDrop {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @keyframes incorrectDrop {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
            100% { transform: translateX(0); }
        }

        @keyframes fadeInOut {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
            20% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            80% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
        }

        .bin-title {
            font-weight: bold;
            font-size: 1.2em;
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 10px;
            color: white;
        }

        .bin-organic .bin-title { background: linear-gradient(45deg, #8BC34A, #AED581); }
        .bin-recyclable .bin-title { background: linear-gradient(45deg, #2196F3, #64B5F6); }
        .bin-hazardous .bin-title { background: linear-gradient(45deg, #FF5722, #FF8A65); }
        .bin-non-recyclable .bin-title { background: linear-gradient(45deg, #795548, #A1887F); }

        .score {
            font-size: 1.5em;
            font-weight: bold;
            color: #4CAF50;
            margin: 20px 0;
            padding: 15px;
            background: rgba(76, 175, 80, 0.1);
            border-radius: 10px;
        }

        .reset-btn, .generate-btn {
            background: linear-gradient(45deg, #FF9800, #FFB74D);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .generate-btn {
            background: linear-gradient(45deg, #4CAF50, #81C784);
        }

        .reset-btn:hover, .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        /* Proyecto Final */
        .campaign-builder {
            text-align: center;
        }

        .campaign-form {
            max-width: 600px;
            margin: 0 auto;
        }

        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #2d5a27;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #4CAF50;
            box-shadow: 0 0 10px rgba(76, 175, 80, 0.2);
        }

        .campaign-preview {
            margin-top: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #E8F5E8, #C8E6C9);
            border-radius: 15px;
            border: 2px solid #4CAF50;
        }

        .progress-bar {
            background: #E0E0E0;
            border-radius: 10px;
            height: 10px;
            margin: 20px 0;
        }

        .progress-fill {
            background: linear-gradient(45deg, #4CAF50, #81C784);
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .regulation-content {
            line-height: 1.8;
            text-align: left;
        }

        .regulation-content h3 {
            color: #2d5a27;
            margin: 20px 0 10px 0;
        }

        .regulation-content ul {
            margin-left: 20px;
            margin-bottom: 15px;
        }

        .waste-types-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .waste-type-card {
            background: linear-gradient(135deg, #F1F8E9, #DCEDC8);
            border-radius: 10px;
            padding: 20px;
            border-left: 5px solid #4CAF50;
        }

        .waste-type-card h4 {
            color: #2d5a27;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">🌱 EcoClasifica</div>
            <div class="subtitle">Plataforma Educativa de Clasificación de Residuos</div>
            <div class="regulation-info">
                📋 Basado en el Reglamento 164-2021 de Guatemala
            </div>
        </div>

        <div class="modules-container">
            <div class="module-card" onclick="showModule(1)">
                <div class="module-icon">📚</div>
                <div class="module-title">Módulo 1: Introducción al Reglamento</div>
                <div class="module-description">Conoce los fundamentos del Reglamento 164-2021 y su importancia para el medio ambiente.</div>
            </div>

            <div class="module-card" onclick="showModule(2)">
                <div class="module-icon">🗂️</div>
                <div class="module-title">Módulo 2: Tipos de Residuos</div>
                <div class="module-description">Aprende a identificar y clasificar los diferentes tipos de residuos según la normativa guatemalteca.</div>
            </div>

            <div class="module-card" onclick="showModule(3)">
                <div class="module-icon">🎮</div>
                <div class="module-title">Módulo 3: Simulador Interactivo</div>
                <div class="module-description">Practica la clasificación de residuos con nuestro simulador interactivo y mejora tus habilidades.</div>
            </div>

            <div class="module-card" onclick="showModule(4)">
                <div class="module-icon">🎯</div>
                <div class="module-title">Módulo 4: Proyecto Final</div>
                <div class="module-description">Crea tu propia campaña digital de concientización ambiental.</div>
            </div>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressFill" style="width: 0%"></div>
        </div>

        <div class="content-area">
            <!-- Módulo 1: Introducción al Reglamento -->
            <div id="module1" class="module-content hidden">
                <h2>🌿 Introducción al Reglamento 164-2021</h2>
                <div class="regulation-content">
                    <h3>¿Qué es el Reglamento 164-2021?</h3>
                    <p>El Reglamento 164-2021 es la normativa guatemalteca que establece las disposiciones para la gestión integral de residuos y desechos sólidos comunes, con el objetivo de proteger la salud humana y el medio ambiente.</p>
                    
                    <h3>Objetivos Principales:</h3>
                    <ul>
                        <li>Promover la reducción, reutilización y reciclaje de residuos</li>
                        <li>Establecer responsabilidades para generadores y gestores de residuos</li>
                        <li>Fomentar la economía circular</li>
                        <li>Proteger los recursos naturales</li>
                        <li>Minimizar los impactos ambientales negativos</li>
                    </ul>

                    <h3>Principios Fundamentales:</h3>
                    <ul>
                        <li><strong>Jerarquía de gestión:</strong> Prevención → Reutilización → Reciclaje → Valorización → Disposición final</li>
                        <li><strong>Responsabilidad extendida del productor:</strong> Los productores son responsables del ciclo de vida completo de sus productos</li>
                        <li><strong>Principio de proximidad:</strong> Gestionar los residuos lo más cerca posible del lugar de generación</li>
                    </ul>

                    <h3>Importancia para Guatemala:</h3>
                    <p>Este reglamento es crucial para Guatemala porque:</p>
                    <ul>
                        <li>Reduce la contaminación ambiental</li>
                        <li>Protege los recursos hídricos del país</li>
                        <li>Contribuye a la salud pública</li>
                        <li>Fomenta la creación de empleos verdes</li>
                        <li>Posiciona al país como líder regional en gestión ambiental</li>
                    </ul>
                </div>
            </div>

            <!-- Módulo 2: Tipos de Residuos -->
            <div id="module2" class="module-content hidden">
                <h2>🗂️ Clasificación de Residuos según el Reglamento 164-2021</h2>
                <div class="waste-types-grid">
                    <div class="waste-type-card">
                        <h4>🥕 Residuos Orgánicos</h4>
                        <p><strong>Definición:</strong> Residuos de origen biológico que se descomponen naturalmente.</p>
                        <p><strong>Ejemplos:</strong></p>
                        <ul>
                            <li>Restos de comida</li>
                            <li>Cáscaras de frutas y verduras</li>
                            <li>Hojas y restos de poda</li>
                            <li>Residuos de jardín</li>
                        </ul>
                        <p><strong>Gestión:</strong> Compostaje, biodigestión, aprovechamiento energético.</p>
                    </div>

                    <div class="waste-type-card">
                        <h4>♻️ Residuos Reciclables</h4>
                        <p><strong>Definición:</strong> Materiales que pueden ser procesados para crear nuevos productos.</p>
                        <p><strong>Ejemplos:</strong></p>
                        <ul>
                            <li>Papel y cartón limpio</li>
                            <li>Plásticos (PET, HDPE, etc.)</li>
                            <li>Vidrio</li>
                            <li>Metales (aluminio, acero)</li>
                        </ul>
                        <p><strong>Gestión:</strong> Separación, limpieza, procesamiento industrial.</p>
                    </div>

                    <div class="waste-type-card">
                        <h4>☢️ Residuos Peligrosos</h4>
                        <p><strong>Definición:</strong> Residuos que representan riesgo para la salud o el ambiente.</p>
                        <p><strong>Ejemplos:</strong></p>
                        <ul>
                            <li>Pilas y baterías</li>
                            <li>Productos químicos</li>
                            <li>Medicamentos vencidos</li>
                            <li>Aceites usados</li>
                            <li>Electrónicos</li>
                        </ul>
                        <p><strong>Gestión:</strong> Tratamiento especializado, disposición controlada.</p>
                    </div>

                    <div class="waste-type-card">
                        <h4>🗑️ Residuos No Reciclables</h4>
                        <p><strong>Definición:</strong> Residuos que no pueden ser reciclados con la tecnología actual.</p>
                        <p><strong>Ejemplos:</strong></p>
                        <ul>
                            <li>Papel higiénico usado</li>
                            <li>Pañales desechables</li>
                            <li>Colillas de cigarrillo</li>
                            <li>Chicles</li>
                            <li>Residuos sanitarios</li>
                        </ul>
                        <p><strong>Gestión:</strong> Disposición final segura en rellenos sanitarios.</p>
                    </div>
                </div>
            </div>

            <!-- Módulo 3: Simulador Interactivo -->
            <div id="module3" class="module-content hidden">
                <div class="simulator">
                    <h2>🎮 Simulador de Clasificación de Residuos</h2>
                    <p>Arrastra cada residuo al contenedor correcto. ¡Pon a prueba tus conocimientos!</p>
                    
                    <div class="score" id="score">Puntuación: 0/0 | Aciertos: 0</div>

                    <div id="wasteItems">
                        <!-- Los residuos se generarán dinámicamente -->
                    </div>

                    <div class="bins-container">
                        <div class="bin bin-organic" data-type="organic">
                            <div class="bin-title">🥕 Orgánicos</div>
                            <div>Residuos biodegradables</div>
                        </div>
                        <div class="bin bin-recyclable" data-type="recyclable">
                            <div class="bin-title">♻️ Reciclables</div>
                            <div>Materiales reutilizables</div>
                        </div>
                        <div class="bin bin-hazardous" data-type="hazardous">
                            <div class="bin-title">☢️ Peligrosos</div>
                            <div>Requieren tratamiento especial</div>
                        </div>
                        <div class="bin bin-non-recyclable" data-type="non-recyclable">
                            <div class="bin-title">🗑️ No Reciclables</div>
                            <div>Disposición final</div>
                        </div>
                    </div>

                    <button class="reset-btn" onclick="resetSimulator()">🔄 Reiniciar Simulador</button>
                </div>
            </div>

            <!-- Módulo 4: Proyecto Final -->
            <div id="module4" class="module-content hidden">
                <div class="campaign-builder">
                    <h2>🎯 Crea tu Campaña Digital</h2>
                    <p>Diseña una campaña de concientización sobre la clasificación de residuos</p>

                    <div class="campaign-form">
                        <div class="form-group">
                            <label for="campaignTitle">Título de la Campaña:</label>
                            <input type="text" id="campaignTitle" placeholder="Ej: ¡Clasifica por un Guatemala más Verde!">
                        </div>

                        <div class="form-group">
                            <label for="targetAudience">Audiencia Objetivo:</label>
                            <select id="targetAudience">
                                <option value="">Selecciona una audiencia</option>
                                <option value="estudiantes">Estudiantes</option>
                                <option value="familias">Familias</option>
                                <option value="empresas">Empresas</option>
                                <option value="comunidades">Comunidades</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="mainMessage">Mensaje Principal:</label>
                            <textarea id="mainMessage" rows="4" placeholder="Escribe el mensaje que quieres transmitir..."></textarea>
                        </div>

                        <div class="form-group">
                            <label for="callToAction">Call to Action:</label>
                            <input type="text" id="callToAction" placeholder="Ej: ¡Únete al cambio, clasifica hoy!">
                        </div>

                        <button class="generate-btn" onclick="generateCampaign()">🚀 Generar Campaña</button>
                    </div>

                    <div id="campaignPreview" class="campaign-preview hidden">
                        <!-- La vista previa se generará aquí -->
                    </div>
                </div>
            </div>

            <!-- Mensaje inicial -->
            <div id="welcomeMessage">
                <h2>🌟 ¡Bienvenido a EcoClasifica!</h2>
                <p style="font-size: 1.1em; line-height: 1.6; text-align: center;">
                    Una plataforma educativa interactiva para aprender sobre la clasificación de residuos según el Reglamento 164-2021 de Guatemala.
                </p>
                <p style="margin-top: 20px; text-align: center; color: #666;">
                    Selecciona un módulo para comenzar tu aprendizaje 👆
                </p>
            </div>
        </div>
    </div>

    <script>
        // Variables globales del simulador
        let currentModule = 0;
        let score = 0;
        let totalItems = 0;
        let correctAnswers = 0;

        // Datos de residuos para el simulador
        const wasteData = [
            {name: "Cáscara de Plátano", type: "organic", emoji: "🍌"},
            {name: "Botella de Plástico", type: "recyclable", emoji: "🍼"},
            {name: "Pila Gastada", type: "hazardous", emoji: "🔋"},
            {name: "Pañal Usado", type: "non-recyclable", emoji: "👶"},
            {name: "Papel Periódico", type: "recyclable", emoji: "📰"},
            {name: "Restos de Pollo", type: "organic", emoji: "🍗"},
            {name: "Medicamento Vencido", type: "hazardous", emoji: "💊"},
            {name: "Colilla de Cigarrillo", type: "non-recyclable", emoji: "🚬"},
            {name: "Lata de Aluminio", type: "recyclable", emoji: "🥤"},
            {name: "Hojas Secas", type: "organic", emoji: "🍂"},
            {name: "Aceite de Cocina Usado", type: "hazardous", emoji: "🫒"},
            {name: "Chicle", type: "non-recyclable", emoji: "🟡"},
            {name: "Cartón Limpio", type: "recyclable", emoji: "📦"},
            {name: "Restos de Verduras", type: "organic", emoji: "🥕"},
            {name: "Celular Viejo", type: "hazardous", emoji: "📱"}
        ];

        let availableWaste = [];
        let draggedElement = null;

        function showModule(moduleNumber) {
            console.log('Mostrando módulo:', moduleNumber);
            
            // Ocultar todos los módulos
            const modules = document.querySelectorAll('.module-content');
            modules.forEach(module => {
                module.classList.add('hidden');
            });
            
            // Ocultar mensaje de bienvenida
            const welcomeMessage = document.getElementById('welcomeMessage');
            if (welcomeMessage) {
                welcomeMessage.classList.add('hidden');
            }

            // Mostrar el módulo seleccionado
            const selectedModule = document.getElementById(`module${moduleNumber}`);
            if (selectedModule) {
                selectedModule.classList.remove('hidden');
            }

            // Actualizar las tarjetas de módulos
            const moduleCards = document.querySelectorAll('.module-card');
            moduleCards.forEach((card, index) => {
                card.classList.remove('active');
                if (index === moduleNumber - 1) {
                    card.classList.add('active');
                }
            });

            // Actualizar barra de progreso
            const progressFill = document.getElementById('progressFill');
            if (progressFill) {
                progressFill.style.width = `${(moduleNumber / 4) * 100}%`;
            }

            currentModule = moduleNumber;

            // Inicializar simulador si es el módulo 3
            if (moduleNumber === 3) {
                setTimeout(() => {
                    initializeSimulator();
                }, 100);
            }
        }

        function initializeSimulator() {
            console.log('Inicializando simulador...');
            availableWaste = [...wasteData];
            score = 0;
            totalItems = 0;
            correctAnswers = 0;
            generateWasteItems();
            updateScore();
        }

        function generateWasteItems() {
            const wasteItemsContainer = document.getElementById('wasteItems');
            if (!wasteItemsContainer) return;
            
            wasteItemsContainer.innerHTML = '';

            // Seleccionar 6 residuos aleatorios
            const shuffled = availableWaste.sort(() => 0.5 - Math.random());
            const selectedWaste = shuffled.slice(0, 6);

            selectedWaste.forEach((waste, index) => {
                const wasteElement = document.createElement('div');
                wasteElement.className = 'waste-item';
                wasteElement.draggable = true;
                wasteElement.dataset.type = waste.type;
                wasteElement.innerHTML = `${waste.emoji} ${waste.name}`;
                
                // Eventos de drag and drop
                wasteElement.addEventListener('dragstart', handleDragStart);
                wasteElement.addEventListener('dragend', handleDragEnd);
                
                wasteItemsContainer.appendChild(wasteElement);
            });

            // Configurar las zonas de drop
            const bins = document.querySelectorAll('.bin');
            bins.forEach(bin => {
                bin.addEventListener('dragover', handleDragOver);
                bin.addEventListener('drop', handleDrop);
                bin.addEventListener('dragenter', handleDragEnter);
                bin.addEventListener('dragleave', handleDragLeave);
            });
        }

        function handleDragStart(e) {
            draggedElement = e.target;
            e.target.style.opacity = '0.5';
        }

        function handleDragEnd(e) {
            e.target.style.opacity = '1';
        }

        function handleDragOver(e) {
            e.preventDefault();
        }

        function handleDragEnter(e) {
            e.preventDefault();
            e.currentTarget.classList.add('drag-over');
        }

        function handleDragLeave(e) {
            e.currentTarget.classList.remove('drag-over');
        }

        function handleDrop(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('drag-over');
            
            if (draggedElement) {
                const wasteType = draggedElement.dataset.type;
                const binType = e.currentTarget.dataset.type;
                
                totalItems++;
                
                if (wasteType === binType) {
                    // Respuesta correcta
                    correctAnswers++;
                    score += 10;
                    e.currentTarget.classList.add('correct-drop');
                    showFeedback('¡Correcto! 🎉', 'success');
                } else {
                    // Respuesta incorrecta
                    e.currentTarget.classList.add('incorrect-drop');
                    showFeedback('¡Incorrecto! Intenta de nuevo 😅', 'error');
                }
                
                // Remover el elemento arrastrado
                draggedElement.remove();
                draggedElement = null;
                
                // Actualizar puntuación
                updateScore();
                
                // Limpiar animaciones después de un tiempo
                setTimeout(() => {
                    e.currentTarget.classList.remove('correct-drop', 'incorrect-drop');
                }, 1000);
                
                // Verificar si todos los elementos han sido clasificados
                const remainingItems = document.querySelectorAll('.waste-item');
                if (remainingItems.length === 0) {
                    setTimeout(() => {
                        showCompletionMessage();
                    }, 1500);
                }
            }
        }

        function updateScore() {
            const scoreElement = document.getElementById('score');
            if (scoreElement) {
                const percentage = totalItems > 0 ? Math.round((correctAnswers / totalItems) * 100) : 0;
                scoreElement.innerHTML = `Puntuación: ${score} puntos | Aciertos: ${correctAnswers}/${totalItems} (${percentage}%)`;
            }
        }

        function showFeedback(message, type) {
            // Crear elemento de feedback temporal
            const feedback = document.createElement('div');
            feedback.textContent = message;
            feedback.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                padding: 20px 40px;
                border-radius: 10px;
                font-size: 1.2em;
                font-weight: bold;
                z-index: 1000;
                animation: fadeInOut 2s ease;
                ${type === 'success' ? 
                    'background: linear-gradient(45deg, #4CAF50, #81C784); color: white;' : 
                    'background: linear-gradient(45deg, #F44336, #EF5350); color: white;'
                }
            `;
            
            document.body.appendChild(feedback);
            
            setTimeout(() => {
                if (feedback.parentNode) {
                    feedback.remove();
                }
            }, 2000);
        }

        function showCompletionMessage() {
            const percentage = Math.round((correctAnswers / totalItems) * 100);
            let message = '';
            let emoji = '';
            
            if (percentage >= 80) {
                message = '¡Excelente trabajo! Eres un experto en clasificación de residuos.';
                emoji = '🏆';
            } else if (percentage >= 60) {
                message = '¡Buen trabajo! Sigue practicando para mejorar.';
                emoji = '👏';
            } else {
                message = '¡Sigue intentando! La práctica hace al maestro.';
                emoji = '💪';
            }
            
            showFeedback(`${emoji} ${message} Puntuación final: ${percentage}%`, 'success');
        }

        function resetSimulator() {
            initializeSimulator();
            showFeedback('🔄 Simulador reiniciado. ¡A practicar!', 'success');
        }

        function generateCampaign() {
            const title = document.getElementById('campaignTitle').value;
            const audience = document.getElementById('targetAudience').value;
            const message = document.getElementById('mainMessage').value;
            const callToAction = document.getElementById('callToAction').value;
            
            if (!title || !audience || !message || !callToAction) {
                showFeedback('⚠️ Por favor completa todos los campos', 'error');
                return;
            }
            
            const preview = document.getElementById('campaignPreview');
            const audienceEmojis = {
                'estudiantes': '👩‍🎓',
                'familias': '👨‍👩‍👧‍👦',
                'empresas': '🏢',
                'comunidades': '🏘️'
            };
            
            preview.innerHTML = `
                <h3>🎯 Vista Previa de tu Campaña</h3>
                <div style="background: white; padding: 25px; border-radius: 15px; margin: 20px 0; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                    <h2 style="color: #2d5a27; text-align: center; margin-bottom: 20px;">${title}</h2>
                    <div style="text-align: center; font-size: 2em; margin: 20px 0;">
                        ${audienceEmojis[audience] || '🎯'} 
                        <span style="font-size: 0.6em; color: #666;">Dirigido a: ${audience}</span>
                    </div>
                    <div style="font-size: 1.1em; line-height: 1.6; margin: 20px 0; text-align: center;">
                        ${message}
                    </div>
                    <div style="background: linear-gradient(45deg, #4CAF50, #81C784); color: white; padding: 15px 30px; border-radius: 25px; display: block; font-weight: bold; margin: 20px auto; width: fit-content; text-align: center;">
                        ${callToAction}
                    </div>
                    <div style="margin-top: 30px; padding: 20px; background: #F1F8E9; border-radius: 10px; border-left: 5px solid #4CAF50;">
                        <h4 style="color: #2d5a27; margin-bottom: 10px;">📋 Elementos de tu campaña:</h4>
                        <ul style="color: #666; line-height: 1.8;">
                            <li>✅ Título impactante y memorable</li>
                            <li>✅ Audiencia objetivo definida</li>
                            <li>✅ Mensaje educativo claro</li>
                            <li>✅ Call to action motivador</li>
                            <li>✅ Diseño atractivo y profesional</li>
                        </ul>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 20px;">
                    <button onclick="downloadCampaign()" style="background: linear-gradient(45deg, #2196F3, #64B5F6); color: white; border: none; padding: 12px 25px; border-radius: 20px; font-weight: bold; cursor: pointer; margin: 5px;">
                        📥 Descargar Diseño
                    </button>
                    <button onclick="shareCampaign()" style="background: linear-gradient(45deg, #FF9800, #FFB74D); color: white; border: none; padding: 12px 25px; border-radius: 20px; font-weight: bold; cursor: pointer; margin: 5px;">
                        📤 Compartir Campaña
                    </button>
                </div>
            `;
            
            preview.classList.remove('hidden');
            showFeedback('🎨 ¡Campaña generada exitosamente!', 'success');
        }

        function downloadCampaign() {
            showFeedback('📥 Función de descarga disponible próximamente', 'success');
        }

        function shareCampaign() {
            const title = document.getElementById('campaignTitle').value;
            const text = `¡Mira mi campaña de concientización ambiental: "${title}"! Creada con EcoClasifica 🌱`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'Mi Campaña EcoClasifica',
                    text: text,
                    url: window.location.href
                }).catch((error) => console.log('Error sharing:', error));
            } else {
                // Fallback para navegadores que no soportan Web Share API
                if (navigator.clipboard) {
                    navigator.clipboard.writeText(text + ' ' + window.location.href)
                        .then(() => showFeedback('📋 ¡Enlace copiado al portapapeles!', 'success'))
                        .catch(() => showFeedback('❌ Error al copiar enlace', 'error'));
                } else {
                    showFeedback('📤 Comparte manualmente: ' + text, 'success');
                }
            }
        }

        // Inicialización al cargar la página
        document.addEventListener('DOMContentLoaded', function() {
            console.log('EcoClasifica cargado correctamente! 🌱');
            
            // Verificar que todos los elementos necesarios están presentes
            const welcomeMessage = document.getElementById('welcomeMessage');
            const progressFill = document.getElementById('progressFill');
            
            if (welcomeMessage) {
                console.log('Mensaje de bienvenida encontrado');
            }
            
            if (progressFill) {
                console.log('Barra de progreso encontrada');
            }
            
            // Test de función showModule
            window.showModule = showModule;
            console.log('Función showModule disponible globalmente');
        });

        // Hacer las funciones disponibles globalmente
        window.showModule = showModule;
        window.resetSimulator = resetSimulator;
        window.generateCampaign = generateCampaign;
        window.downloadCampaign = downloadCampaign;
        window.shareCampaign = shareCampaign;
    </script>
</body>
</html>